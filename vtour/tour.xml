<krpano version="1.19" title="Virtual Tour">
	<include url="skin/vtourskin.xml" />

	<!-- customize skin settings: maps, gyro, webvr, thumbnails, tooltips, layout, design, ... -->
	<skin_settings 
		maps="false"
		maps_type="bing"
		maps_bing_api_key=""
		maps_zoombuttons="false"
		gyro="true"
		webvr="true"
		littleplanetintro="false"
		title="true"
		thumbs="true"
		thumbs_width="120" thumbs_height="80" thumbs_padding="10" thumbs_crop="0|40|240|160"
		thumbs_opened="false"
		thumbs_text="false"
		thumbs_dragging="true"
		thumbs_onhoverscrolling="false"
		thumbs_scrollbuttons="false"
		thumbs_scrollindicator="false"
		thumbs_loop="false"
		tooltips_buttons="false"
		tooltips_thumbs="false"
		tooltips_hotspots="false"
		tooltips_mapspots="false"
		deeplinking="false"
		loadscene_flags="MERGE"
		loadscene_blend="OPENBLEND(0.5, 0.0, 0.75, 0.05, linear)"
		loadscene_blend_prev="SLIDEBLEND(0.5, 180, 0.75, linear)"
		loadscene_blend_next="SLIDEBLEND(0.5,   0, 0.75, linear)"
		loadingtext="loading..."
		layout_width="100%"
		layout_maxwidth="814"
		controlbar_width="-24"
		controlbar_height="40"
		controlbar_offset="20"
		controlbar_offset_closed="-40"
		controlbar_overlap.no-fractionalscaling="10"
		controlbar_overlap.fractionalscaling="0"
		design_skin_images="vtourskin.png"
		design_bgcolor="0x2D3E50"
		design_bgalpha="0.8"
		design_bgborder="0"
		design_bgroundedge="1"
		design_bgshadow="0 4 10 0x000000 0.3"
		design_thumbborder_bgborder="3 0xFFFFFF 1.0"
		design_thumbborder_padding="2"
		design_thumbborder_bgroundedge="0"
		design_text_css="color:#FFFFFF; font-family:Arial;"
		design_text_shadow="1"
    />

	<!-- startup action - load the first scene -->
	<action name="startup" autorun="onstart">
		showlog(true);
		if(startscene === null OR !scene[get(startscene)], copy(startscene,scene[0].name); );
		loadscene(get(startscene), null, MERGE);
		if(startactions !== null, startactions() );
		set(hotspotIndex, 45);
		createGifs(get(hotspotIndex));
	</action>

	<action name="createGifs">
		<!-- Generate the hotspot name -->
		set(hotspotName, "SunsetUI");
		txtadd(hotspotName, get(hotspotName), 1);

		<!-- Figure out what image file we're going to get the hotspot from -->
		set(imageName, "skin/NewSunset/TIMELAPSE_UI_2_000");
		txtadd(imageName, get(imageName), %1, ".png");

		<!-- Calculate the x position of the hotspot -->
		set(xValue, -293.4969);
		set(addThis, 76.6);
		set(multiplyIndex, get(1));
		sub(multiplyIndex, 1);
		mul(addThis, multiplyIndex);
		add(xValue, addThis);

		addhotspot(get(hotspotName));
		set(hotspot[get(hotspotName)].url, get(imageName));
		set(hotspot[get(hotspotName)].ox, get(xValue));
		set(hotspot[get(hotspotName)].oy, "-301.3806");
		set(hotspot[get(hotspotName)].ath, "-90");
		set(hotspot[get(hotspotName)].atv, "0");
		set(hotspot[get(hotspotName)].distorted, "true");
		set(hotspot[get(hotspotName)].edge, "lefttop");
		set(hotspot[get(hotspotName)].capture, "false");
		set(hotspot[get(hotspotName)].visible, "true");
		set(hotspot[get(hotspotName)].keep, "true");
		set(hotspot[get(hotspotName)].scale, "1.0");
		set(hotspot[get(hotspotName)].width, "613.6871");
		set(hotspot[get(hotspotName)].height, "613.4969");

		<!-- Generate the hotspot name -->
		set(hotspotName2, "SunsetUI2");
		txtadd(hotspotName2, get(hotspotName), 1);

		<!-- Figure out what image file we're going to get the hotspot from -->
		set(imageName, "skin/NewSunset/TIMELAPSE_UI_2_000");
		txtadd(imageName, get(imageName), 20, ".png");

		addhotspot(get(hotspotName2));
		set(hotspot[get(hotspotName2)].url, get(imageName));
		set(hotspot[get(hotspotName2)].ox, get(xValue));
		set(hotspot[get(hotspotName2)].oy, "-301.3806");
		set(hotspot[get(hotspotName2)].ath, "-90");
		set(hotspot[get(hotspotName2)].atv, "0");
		set(hotspot[get(hotspotName2)].distorted, "true");
		set(hotspot[get(hotspotName2)].edge, "lefttop");
		set(hotspot[get(hotspotName2)].capture, "false");
		set(hotspot[get(hotspotName2)].visible, "false");
		set(hotspot[get(hotspotName2)].keep, "true");
		set(hotspot[get(hotspotName2)].scale, "1.0");
		set(hotspot[get(hotspotName2)].width, "613.6871");
		set(hotspot[get(hotspotName2)].height, "613.4969");

		hotspot_animate("skin/NewSunset/TIMELAPSE_UI_2_000", get(hotspotName), get(hotspotName2), 1, 45, 0);
	</action>

	<plugin url="skin/NewSunset/TIMELAPSE_UI_2_00001.png" visible="false" onloaded="removeplugin(get(name));" />
	<plugin url="skin/NewSunset/TIMELAPSE_UI_2_00002.png" visible="false" onloaded="removeplugin(get(name));" />
	<plugin url="skin/NewSunset/TIMELAPSE_UI_2_00003.png" visible="false" onloaded="removeplugin(get(name));" />
	<plugin url="skin/NewSunset/TIMELAPSE_UI_2_00004.png" visible="false" onloaded="removeplugin(get(name));" />
	<plugin url="skin/NewSunset/TIMELAPSE_UI_2_00005.png" visible="false" onloaded="removeplugin(get(name));" />
	<plugin url="skin/NewSunset/TIMELAPSE_UI_2_00006.png" visible="false" onloaded="removeplugin(get(name));" />
	<plugin url="skin/NewSunset/TIMELAPSE_UI_2_00007.png" visible="false" onloaded="removeplugin(get(name));" />
	<plugin url="skin/NewSunset/TIMELAPSE_UI_2_00008.png" visible="false" onloaded="removeplugin(get(name));" />
	<plugin url="skin/NewSunset/TIMELAPSE_UI_2_00009.png" visible="false" onloaded="removeplugin(get(name));" />
	<plugin url="skin/NewSunset/TIMELAPSE_UI_2_00010.png" visible="false" onloaded="removeplugin(get(name));" />
	<plugin url="skin/NewSunset/TIMELAPSE_UI_2_00011.png" visible="false" onloaded="removeplugin(get(name));" />
	<plugin url="skin/NewSunset/TIMELAPSE_UI_2_00012.png" visible="false" onloaded="removeplugin(get(name));" />
	<plugin url="skin/NewSunset/TIMELAPSE_UI_2_00013.png" visible="false" onloaded="removeplugin(get(name));" />
	<plugin url="skin/NewSunset/TIMELAPSE_UI_2_00014.png" visible="false" onloaded="removeplugin(get(name));" />
	<plugin url="skin/NewSunset/TIMELAPSE_UI_2_00015.png" visible="false" onloaded="removeplugin(get(name));" />
	<plugin url="skin/NewSunset/TIMELAPSE_UI_2_00016.png" visible="false" onloaded="removeplugin(get(name));" />
	<plugin url="skin/NewSunset/TIMELAPSE_UI_2_00017.png" visible="false" onloaded="removeplugin(get(name));" />
	<plugin url="skin/NewSunset/TIMELAPSE_UI_2_00018.png" visible="false" onloaded="removeplugin(get(name));" />
	<plugin url="skin/NewSunset/TIMELAPSE_UI_2_00019.png" visible="false" onloaded="removeplugin(get(name));" />
	<plugin url="skin/NewSunset/TIMELAPSE_UI_2_00020.png" visible="false" onloaded="removeplugin(get(name));" />
	<plugin url="skin/NewSunset/TIMELAPSE_UI_2_00021.png" visible="false" onloaded="removeplugin(get(name));" />
	<plugin url="skin/NewSunset/TIMELAPSE_UI_2_00022.png" visible="false" onloaded="removeplugin(get(name));" />
	<plugin url="skin/NewSunset/TIMELAPSE_UI_2_00023.png" visible="false" onloaded="removeplugin(get(name));" />
	<plugin url="skin/NewSunset/TIMELAPSE_UI_2_00024.png" visible="false" onloaded="removeplugin(get(name));" />
	<plugin url="skin/NewSunset/TIMELAPSE_UI_2_00025.png" visible="false" onloaded="removeplugin(get(name));" />
	<plugin url="skin/NewSunset/TIMELAPSE_UI_2_00026.png" visible="false" onloaded="removeplugin(get(name));" />
	<plugin url="skin/NewSunset/TIMELAPSE_UI_2_00027.png" visible="false" onloaded="removeplugin(get(name));" />
	<plugin url="skin/NewSunset/TIMELAPSE_UI_2_00028.png" visible="false" onloaded="removeplugin(get(name));" />
	<plugin url="skin/NewSunset/TIMELAPSE_UI_2_00029.png" visible="false" onloaded="removeplugin(get(name));" />
	<plugin url="skin/NewSunset/TIMELAPSE_UI_2_00030.png" visible="false" onloaded="removeplugin(get(name));" />
	<plugin url="skin/NewSunset/TIMELAPSE_UI_2_00031.png" visible="false" onloaded="removeplugin(get(name));" />
	<plugin url="skin/NewSunset/TIMELAPSE_UI_2_00032.png" visible="false" onloaded="removeplugin(get(name));" />
	<plugin url="skin/NewSunset/TIMELAPSE_UI_2_00033.png" visible="false" onloaded="removeplugin(get(name));" />
	<plugin url="skin/NewSunset/TIMELAPSE_UI_2_00034.png" visible="false" onloaded="removeplugin(get(name));" />
	<plugin url="skin/NewSunset/TIMELAPSE_UI_2_00035.png" visible="false" onloaded="removeplugin(get(name));" />
	<plugin url="skin/NewSunset/TIMELAPSE_UI_2_00036.png" visible="false" onloaded="removeplugin(get(name));" />
	<plugin url="skin/NewSunset/TIMELAPSE_UI_2_00037.png" visible="false" onloaded="removeplugin(get(name));" />
	<plugin url="skin/NewSunset/TIMELAPSE_UI_2_00038.png" visible="false" onloaded="removeplugin(get(name));" />
	<plugin url="skin/NewSunset/TIMELAPSE_UI_2_00039.png" visible="false" onloaded="removeplugin(get(name));" />
	<plugin url="skin/NewSunset/TIMELAPSE_UI_2_00040.png" visible="false" onloaded="removeplugin(get(name));" />
	<plugin url="skin/NewSunset/TIMELAPSE_UI_2_00041.png" visible="false" onloaded="removeplugin(get(name));" />
	<plugin url="skin/NewSunset/TIMELAPSE_UI_2_00042.png" visible="false" onloaded="removeplugin(get(name));" />
	<plugin url="skin/NewSunset/TIMELAPSE_UI_2_00043.png" visible="false" onloaded="removeplugin(get(name));" />
	<plugin url="skin/NewSunset/TIMELAPSE_UI_2_00044.png" visible="false" onloaded="removeplugin(get(name));" />
	<plugin url="skin/NewSunset/TIMELAPSE_UI_2_00045.png" visible="false" onloaded="removeplugin(get(name));" />

 	<action name="hotspot_animate">
	    set(theImageName, %1);
	    set(frameIndex, %4);
	    set(maxFrameIndex, %5);
	    set(imageSwitchBool, %6);

	    <!-- If the frame index is less than ten, add a 0 onto the image name -->
 		if(frameIndex LT 10, txtadd(theImageName, get(theImageName), "0"););
		txtadd(theImageName, get(theImageName), get(frameIndex), ".png");

		<!--
			Determine which image is going to be visible this frame based
			on the image switch bool
		-->
		set(oneVisible, "false");
		set(twoVisible, "false");

		if (imageSwitchBool == 1
		 ,
		 set(oneVisible, "true");
		 set(imageSwitchBool, 0);
		 set(hotspot[%3].url, get(theImageName));
		 ,
		 set(twoVisible, "true");
		 set(imageSwitchBool, 1);
		 set(hotspot[%2].url, get(theImageName));
	    );

		set(hotspot[%2].visible, get(oneVisible));
		set(hotspot[%3].visible, get(twoVisible));

		<!-- Increment the frame index but cap it by the max number of frames -->
		add(frameIndex, 1);
		if(frameIndex GT maxFrameIndex, set(frameIndex, 1));

		delayedcall(0.05, hotspot_animate(%1, %2, %3, get(frameIndex), get(maxFrameIndex), get(imageSwitchBool)) );
	</action> -->
	
	<scene name="scene_pano" title="pano" onstart="" thumburl="panos/pano.tiles/thumb.jpg" lat="" lng="" heading="">
		<view hlookat="0" vlookat="0" fovtype="MFOV" fov="120" maxpixelzoom="2.0" fovmin="70" fovmax="140" limitview="auto" />

		<preview url="panos/pano.tiles/preview.jpg" />

		<image>
			<cube url="panos/pano.tiles/pano_%s.jpg" />

			<cube url="panos/pano.tiles/mobile/pano_%s.jpg" devices="mobile" />
		</image>
	</scene>
</krpano>
